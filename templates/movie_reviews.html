{% extends "base.html" %}
{% block content %}
<div class="container">
    <h1>Reviews for {{ movie.title }}</h1>
    <div class="movie-details mb-4">
        <img src="{{ movie.img_url }}" alt="Poster of {{ movie.title }}" style="width:150px;">
        <p>Movie ID: {{ movie.movie_id }}</p>
        <p>Title: {{ movie.title }}</p>
        <p>Director: {{ movie.director }}</p>
        <p>Rating: {{ movie.rating }}</p>
        <p>Average User Rating: {{ avg_user_rating }}</p>
    </div>

    <div class="reviews-section">
        <h2>User Reviews</h2>
        {% if reviews %}
            <ul class="list-group">
            {% for review in reviews %}
                <li class="list-group-item">
                    <strong>Review by User ID {{ review.user_id }}:</strong>
                    <p>{{ review.review_text }}</p>
                    <p>Rating: {{ review.rating }}</p>
                </li>
            {% endfor %}
            </ul>
        {% else %}
            <p>No reviews yet. Be the first to add a review!</p>
        {% endif %}
    </div>

    <a href="{{ url_for('add_review_form', user_id=user_id, movie_id=movie.movie_id) }}" class="btn btn-primary mt-3">Add Review</a>
    <a href="{{ url_for('list_user_movies', user_id=user_id) }}" class="btn btn-secondary mt-3">Back to Movie List</a>
</div>
{% endblock %}
